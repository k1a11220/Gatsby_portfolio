{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h2>javascript에서의 map</h2>\n<p>MDN에 나와있는 설명입니다.</p>\n<blockquote>\n<p>map() 메서드는 배열 내의 모든 요소 각각에 대하여 주어진 함수를 호출한 결과를 모아 새로운 배열을 반환합니다.</p>\n</blockquote>\n<p>설명만으로는 이해하기 힘들 수 있기 때문에 샘플코드와 함께 살펴보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> array1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span> <span class=\"token number\">16</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// pass a function to map</span>\n<span class=\"token keyword\">const</span> map1 <span class=\"token operator\">=</span> array1<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> x <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>map1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// expected output: Array [2, 8, 18, 32]</span></code></pre></div>\n<p>쉽게 말하면 모든 배열의 값(array1 -> [1, 4, 9, 16]에 특정 함수((x) => x * 2))를 실행한다고 생각하시면 됩니다.</p>\n<p>직접 만들면서 익혀보도록 하겠습니다.</p>\n<h2>데이터 걸러내기</h2>\n<p>저번에 ResultCard들 만들어 API 데이터를 다루기로 했습니다. 먼저, 반환되는 데이터를 살펴봅시다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3cbf4383047ed1d4429fa80943aa1796/704c2/console-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 28.645833333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA30lEQVQY032Q0XKDIBBF/ZEmMY3GOEbYZQEBJZP//6jbgbY+1T4wl33Yw7k0zA4rK1giaBZoEhALnA9gMhCtYa3HEjKmp0Z7veHSHp9GZMGmRgRSMOJBbCHiEVOGMRaeCDFExLTVh27dUBfPl88joEeYR7DSO7BkiBuUIjAL4pqRUkZ/H/Fxavflv6CNlYCoRlhdDJdamY1DWjOUYhg2FV7mx/jE6Xz939DZVIFOK4gLP4YOW36DSCqw1M+vN6ZJ7cDDP9STBc0zxuFRK3X9dw6PqWbf3eu92JX5yOwX+AVm0bUiYcdinAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/3cbf4383047ed1d4429fa80943aa1796/a59e9/console-1.webp 192w,\n/static/3cbf4383047ed1d4429fa80943aa1796/0ca9f/console-1.webp 384w,\n/static/3cbf4383047ed1d4429fa80943aa1796/dc9b9/console-1.webp 768w,\n/static/3cbf4383047ed1d4429fa80943aa1796/e2c2f/console-1.webp 1152w,\n/static/3cbf4383047ed1d4429fa80943aa1796/f3efb/console-1.webp 1536w,\n/static/3cbf4383047ed1d4429fa80943aa1796/1f6df/console-1.webp 2286w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/3cbf4383047ed1d4429fa80943aa1796/3b721/console-1.png 192w,\n/static/3cbf4383047ed1d4429fa80943aa1796/66595/console-1.png 384w,\n/static/3cbf4383047ed1d4429fa80943aa1796/fe486/console-1.png 768w,\n/static/3cbf4383047ed1d4429fa80943aa1796/d2d74/console-1.png 1152w,\n/static/3cbf4383047ed1d4429fa80943aa1796/e8464/console-1.png 1536w,\n/static/3cbf4383047ed1d4429fa80943aa1796/704c2/console-1.png 2286w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/3cbf4383047ed1d4429fa80943aa1796/fe486/console-1.png\"\n            alt=\"console\"\n            title=\"console\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>0~3번, 마지막 배열은 API의 정보를 담고있는 데이터기 때문에 servList만 걸러내야 합니다. slice 함수를 통해 배열을 정제한 뒤 hook을 사용해 만들 배열에 JSON을 넣겠습니다.</p>\n<p>Home.js</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> resultNumber <span class=\"token operator\">=</span> <span class=\"token number\">4</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//필요없는 최상위 3개의 데이터</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> setState<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  results<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//api 데이터를 담는 hooks</span>\n\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">parseStr</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">dataSet</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> dataArr <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">XMLParser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">parseFromString</span><span class=\"token punctuation\">(</span>dataSet<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">;</span> <span class=\"token comment\">// xml을 json으로 변경</span>\n  resultCount <span class=\"token operator\">=</span> dataArr<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> <span class=\"token comment\">// dataArr의 길이</span>\n  <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">preState</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token operator\">...</span>preState<span class=\"token punctuation\">,</span>\n      results<span class=\"token operator\">:</span> dataArr<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span>resultNumber<span class=\"token punctuation\">,</span> resultCount <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//4번째부터 마지막 1개를 제외한 배열을 만든다.</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>정상적으로 원하는 데이터만 출력되는 것을 확인할 수 있습니다.\n<img src=\"/assets/2021-04-13-bokdda-7/console-2.png\" alt=\"console-2\"></p>\n<h2>ResultList 함수 만들기</h2>\n<p>이젠 ResultCard를 map 함수를 통해 생성하는 ResultList 컴포넌트를 만들겠습니다.</p>\n<p>JSON 타입의 API 데이터를 result라는 인자로 받아 map 함수를 통해 ResultCard를 생성합니다.</p>\n<p>이때 데이터를 살펴보면, 우리가 필요한 정보는 n/children/n/value 라는 것을 알 수 있습니다. (n은 숫자를 의미 0, 1, 2, 3, …)\n따라서 ResultCard에 필요한 데이터를 입력해주면 됩니다.\n<img src=\"/assets/2021-04-13-bokdda-7/console-3.png\" alt=\"console-3\"></p>\n<p>ResultList.js</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> ResultCard <span class=\"token keyword\">from</span> <span class=\"token string\">\"./ResultCard\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">ResultList</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">results</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>section className<span class=\"token operator\">=</span><span class=\"token string\">\"result-container\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n        <span class=\"token punctuation\">{</span>results<span class=\"token punctuation\">.</span>results<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">post</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n            <span class=\"token operator\">&lt;</span>ResultCard\n              key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">}</span> <span class=\"token comment\">// key는 inqNum 고유번호로 지정함.</span>\n              title<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">[</span><span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">}</span> <span class=\"token comment\">// 제목: servNm</span>\n              ministry<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">}</span> <span class=\"token comment\">// 기관: jurMnofNm</span>\n              details<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">}</span> <span class=\"token comment\">// 설명: servDgst</span>\n            <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>section<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> ResultList<span class=\"token punctuation\">;</span></code></pre></div>\n<h2>ResultList 불러오기</h2>\n<p>Home에서 ResultList를 불러옵니다.</p>\n<p>Home.js</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">...</span>\n<span class=\"token operator\">&lt;</span>ResultList results<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>state<span class=\"token punctuation\">.</span>results<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token operator\">...</span></code></pre></div>","frontmatter":{"title":"[볶다] 7. map 함수를 활용하여 리스트 생성하기","summary":null,"date":"2021.04.13.","categories":["볶다"],"thumbnail":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAYklEQVQ4y+3UMQrAMAwDQP//p31ABomiFBcbQrfEmUoGgTH40GQDcAHoJAVAJPts8g5As1gq0OUkaj5kw8gKmA1lA6JKw4ztQA54wAP+EByeqqq/0A37LCp5/6o3bBvQvL0f3+giOoxde38AAAAASUVORK5CYII=","aspectRatio":1,"src":"/static/9a4a815bd4d2dfb72684f50d77d9d02f/89572/White.png","srcSet":"/static/9a4a815bd4d2dfb72684f50d77d9d02f/a9f05/White.png 200w,\n/static/9a4a815bd4d2dfb72684f50d77d9d02f/89572/White.png 380w","srcWebp":"/static/9a4a815bd4d2dfb72684f50d77d9d02f/2ad17/White.webp","srcSetWebp":"/static/9a4a815bd4d2dfb72684f50d77d9d02f/8444f/White.webp 200w,\n/static/9a4a815bd4d2dfb72684f50d77d9d02f/2ad17/White.webp 380w","sizes":"(max-width: 380px) 100vw, 380px"}}}}}}]}},"pageContext":{"slug":"/2021-04-13-bokdda-7/"}}